//#include "IdlePageQrCode.h"
#include "Messages.h" //IDLE_MODE + msgs
#include "Buttons.h"  // BUTTON_STATE
//#include "hal_lpm.h" 
#include "hal_board_type.h"// SW_
#include "LcdDisplay.h"
#include "Icons.h"

const unsigned char pBarCodeImage[96*12] ={
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x70 , 0xf8 , 0x1 , 0x80 , 0xff , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x7c , 0xf8 , 0x1 , 0xc0 , 0xff , 0x3 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x7c , 0xf8 , 0x1 , 0xf0 , 0xe7 , 0x7 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x7c , 0xf8 , 0x1 , 0xf0 , 0x80 , 0x7 ,
0x0 , 0xff , 0xf , 0xff , 0xc3 , 0xff , 0xff , 0xfb , 0xff , 0x78 , 0xff , 0xf ,
0x80 , 0xff , 0x8f , 0xff , 0xc7 , 0xff , 0xff , 0xfb , 0xff , 0xb9 , 0xff , 0xe ,
0xc0 , 0xff , 0xcf , 0xff , 0xcf , 0xff , 0xff , 0xfb , 0xff , 0xdd , 0xff , 0xc ,
0xc0 , 0xef , 0xcf , 0xcf , 0xcf , 0xff , 0xff , 0xfb , 0xff , 0xdd , 0xf3 , 0x1c ,
0xc0 , 0xc7 , 0xf , 0xf0 , 0xcf , 0x5f , 0x7c , 0xf8 , 0xfb , 0xdd , 0xf1 , 0x1c ,
0xe0 , 0xc7 , 0xf , 0xff , 0xcf , 0xf , 0x7c , 0xf8 , 0xf1 , 0xfd , 0xf1 , 0x1c ,
0xe0 , 0xc7 , 0xcf , 0xff , 0xcf , 0xf , 0x7c , 0xf8 , 0xf1 , 0xfd , 0x71 , 0xc ,
0xc0 , 0xc7 , 0xcf , 0xcf , 0xcf , 0xf , 0x7c , 0xf8 , 0xf1 , 0xfd , 0x71 , 0xe ,
0xc0 , 0xff , 0xef , 0xc7 , 0xcf , 0xf , 0x7c , 0xf8 , 0xf1 , 0xfd , 0x79 , 0xf ,
0xc0 , 0xff , 0xef , 0xff , 0xcf , 0xf , 0xfc , 0xfb , 0xf1 , 0xfd , 0xff , 0x7 ,
0x80 , 0xff , 0xcf , 0xff , 0xcf , 0xf , 0xfc , 0xfb , 0xf1 , 0xf9 , 0xff , 0x3 ,
0x0 , 0xff , 0xcf , 0xff , 0xcf , 0xf , 0xfc , 0xfb , 0xf1 , 0xf9 , 0xff , 0x1 ,
0x0 , 0xc0 , 0x8f , 0xbf , 0xdf , 0xf , 0xf8 , 0xfb , 0xf1 , 0xf1 , 0x0 , 0xf ,
0xc0 , 0xc7 , 0xf , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0xf0 , 0xe7 , 0xf ,
0xc0 , 0xef , 0xf , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0xe0 , 0xff , 0x3 ,
0xc0 , 0xff , 0x7 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x80 , 0xff , 0x1 ,
0x80 , 0xff , 0x7 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0xff , 0x3 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x70 , 0xf8 , 0x1 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x7c , 0xf8 , 0x1 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x7c , 0xf8 , 0x1 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x7c , 0xf8 , 0x1 , 0x0 , 0x0 , 0x0 ,
0x0 , 0xff , 0xf , 0xff , 0xc3 , 0xff , 0xff , 0xfb , 0xff , 0xfc , 0xf0 , 0x1 ,
0x80 , 0xff , 0x8f , 0xff , 0xc7 , 0xff , 0xff , 0xfb , 0xff , 0xfd , 0xf8 , 0x1 ,
0xc0 , 0xff , 0xcf , 0xff , 0xcf , 0xff , 0xff , 0xfb , 0xff , 0xf9 , 0xf9 , 0x1 ,
0xc0 , 0xef , 0xcf , 0xcf , 0xcf , 0xff , 0xff , 0xfb , 0xff , 0xf9 , 0xf9 , 0x0 ,
0xc0 , 0xc7 , 0xf , 0xf0 , 0xcf , 0x5f , 0x7c , 0xf8 , 0xfb , 0xf1 , 0xf9 , 0x0 ,
0xe0 , 0xc7 , 0xf , 0xff , 0xcf , 0xf , 0x7c , 0xf8 , 0xf1 , 0xf1 , 0xff , 0x0 ,
0xe0 , 0xc7 , 0xcf , 0xff , 0xcf , 0xf , 0x7c , 0xf8 , 0xf1 , 0xf1 , 0x7f , 0x0 ,
0xc0 , 0xc7 , 0xcf , 0xcf , 0xcf , 0xf , 0x7c , 0xf8 , 0xf1 , 0xe1 , 0x7f , 0x0 ,
0xc0 , 0xff , 0xef , 0xc7 , 0xcf , 0xf , 0x7c , 0xf8 , 0xf1 , 0xe1 , 0x7f , 0x0 ,
0xc0 , 0xff , 0xef , 0xff , 0xcf , 0xf , 0xfc , 0xfb , 0xf1 , 0xc1 , 0x3f , 0x0 ,
0x80 , 0xff , 0xcf , 0xff , 0xcf , 0xf , 0xfc , 0xfb , 0xf1 , 0xc1 , 0x3f , 0x0 ,
0x0 , 0xff , 0xcf , 0xff , 0xcf , 0xf , 0xfc , 0xfb , 0xf1 , 0xc1 , 0x3f , 0x0 ,
0x0 , 0xc0 , 0x8f , 0xbf , 0xdf , 0xf , 0xf8 , 0xfb , 0xf1 , 0x81 , 0x1f , 0x0 ,
0xc0 , 0xc7 , 0xf , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x80 , 0x1f , 0x0 ,
0xc0 , 0xef , 0xf , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0xd8 , 0xf , 0x0 ,
0xc0 , 0xff , 0x7 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0xf8 , 0xf , 0x0 ,
0x80 , 0xff , 0x7 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0xf8 , 0x7 , 0x0 ,
0x0 , 0xff , 0x3 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0xf8 , 0x7 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0xff , 0x3 , 0xfe , 0xc1 , 0xf7 , 0xf3 , 0x7 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x80 , 0xff , 0x87 , 0xff , 0xc7 , 0xff , 0xff , 0x7 , 0x0 , 0x0 , 0x0 ,
0x0 , 0xc0 , 0xff , 0xcf , 0xff , 0xcf , 0xff , 0xff , 0xf , 0x0 , 0x0 , 0x0 ,
0x0 , 0xc0 , 0xdf , 0xcf , 0xff , 0xcf , 0xff , 0xff , 0xf , 0x0 , 0x0 , 0x0 ,
0x0 , 0xc0 , 0x8f , 0xcf , 0xcf , 0xcf , 0xff , 0xff , 0xf , 0x0 , 0x0 , 0x0 ,
0x0 , 0xe0 , 0x7 , 0xe0 , 0x87 , 0xdf , 0xcf , 0xcf , 0xf , 0x0 , 0x0 , 0x0 ,
0x0 , 0xe0 , 0x7 , 0xe0 , 0x87 , 0xdf , 0xcf , 0xcf , 0xf , 0x0 , 0x0 , 0x0 ,
0x0 , 0xe0 , 0x7 , 0xe0 , 0x87 , 0xdf , 0xcf , 0xcf , 0xf , 0x0 , 0x0 , 0x0 ,
0xc0 , 0xcf , 0x8f , 0xcf , 0xcf , 0xcf , 0xcf , 0xcf , 0xf , 0x0 , 0x0 , 0x0 ,
0xc0 , 0xcf , 0xdf , 0xdf , 0xff , 0xcf , 0xcf , 0xcf , 0xf , 0x0 , 0x0 , 0x0 ,
0xc0 , 0xcf , 0xff , 0xcf , 0xff , 0xcf , 0xcf , 0xcf , 0xf , 0x0 , 0x0 , 0x0 ,
0xc0 , 0x8f , 0xff , 0x87 , 0xff , 0xc7 , 0xcf , 0xcf , 0xf , 0x0 , 0x0 , 0x0 ,
0xc0 , 0xf , 0xff , 0x3 , 0xfe , 0xc1 , 0xcf , 0xcf , 0xf , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 , 0x0 ,
};

int IdlePageQrCodeButtonHandler(unsigned char MsgOptions)
{
	// Probably should be moved to common code
	StopAllDisplayTimers();

	// Why when our image is full size??
	//FillMyBuffer(STARTING_ROW,NUM_LCD_ROWS,0x00);
	CopyRowsIntoMyBuffer(pBarCodeImage,STARTING_ROW,NUM_LCD_ROWS);
        
        // Maybe return the new idle state?
        return 0;
}

void IdlePageQrCodeConfigButtons(void)
{
    EnableButtonAction(IDLE_MODE,
                       SW_F_INDEX,
                       BUTTON_STATE_IMMEDIATE,
                       WatchStatusMsg,
                       RESET_DISPLAY_TIMER);

    EnableButtonAction(IDLE_MODE,
                       SW_E_INDEX,
                       BUTTON_STATE_IMMEDIATE,
                       ListPairedDevicesMsg,
                       NO_MSG_OPTIONS);

    /* led is already assigned */

    EnableButtonAction(IDLE_MODE,
                       SW_C_INDEX,
                       BUTTON_STATE_IMMEDIATE,
                       MenuModeMsg,
                       MENU_MODE_OPTION_PAGE1);

    DisableButtonAction(IDLE_MODE,
                        SW_B_INDEX,
                        BUTTON_STATE_IMMEDIATE);

    /* map this mode's entry button to go back to the idle mode */
    EnableButtonAction(IDLE_MODE,
                       SW_A_INDEX,
                       BUTTON_STATE_IMMEDIATE,
                       IdleUpdate,
                       RESET_DISPLAY_TIMER);
}

